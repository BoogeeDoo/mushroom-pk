# Mushroom PK Demo

## Start Up

首先安装依赖：

```sh
$ npm install
```

然后启动服务器：

```sh
$ node server
```

接下去启动“模拟九台”客户端——

```sh
$ node clientCluster
```

启动之后，会一次性开启九个 Bot 然后每个自动连接服务器自动走完流程。

最后启动一个自己看的客户端：

```sh
$ node client
```

然后就可以慢慢欣赏完蛋疼的 PK 过程了。文件型结果在 `log` 文件夹下面，一个 Bot 一个 log。

## Example

```
玩家名：买处煊 『敗』
最大血量：100	当前血量：0 [卒]
【技能】
  [沚香含刀谱]，攻 6，冷却 12 秒，群。
  [犬庭掌]，攻 14，冷却 14 秒。
  [挂小剑谱]，攻 10，冷却 10 秒。
  [辈合棍谱]，攻 10，冷却 10 秒。
  [译蜂涤错拳]，攻 11，冷却 11 秒。
【队友】
  【乔炼】，最大生命 100，当前生命 0。 [卒]
  【柴祖前】，最大生命 100，当前生命 0。 [卒]
  【贾撮】，最大生命 100，当前生命 0。 [卒]
  【水焘召】，最大生命 100，当前生命 0。 [卒]
【对手】
  【裴笺翘】，最大生命 100，当前生命 0。 [卒]
  【裴奈房】，最大生命 100，当前生命 47。
  【乐感崎】，最大生命 100，当前生命 7。
  【丁暗堤】，最大生命 100，当前生命 40。
  【贝下冷】，最大生命 100，当前生命 22。
=============== 战斗记录 ===============
[19:00:12.439] 【我】对【乐感崎】释放了技能 [译蜂涤错拳]。
[19:00:12.445] 【乐感崎】被【我】的译蜂涤错拳所伤，生命值变成了 89。
[19:00:12.636] 【乐感崎】释放了群攻技能 [皿湍航纳钩]。
[19:00:12.643] 【乔炼】躲避了【乐感崎】的技能：皿湍航纳钩。
[19:00:12.643] 【柴祖前】被【乐感崎】的皿湍航纳钩所伤，生命值变成了 93。
[19:00:12.643] 【贾撮】被【乐感崎】的皿湍航纳钩所伤，生命值变成了 93。
[19:00:12.643] 【我】躲避了【乐感崎】的技能：皿湍航纳钩。
[19:00:12.643] 【水焘召】被【乐感崎】的皿湍航纳钩所伤，生命值变成了 93。
[19:00:13.077] 【乔炼】释放了群攻技能 [桦讲机心诀]。
[19:00:13.084] 【裴笺翘】被【乔炼】的桦讲机心诀所伤，生命值变成了 94。
[19:00:13.084] 【裴奈房】被【乔炼】的桦讲机心诀所伤，生命值变成了 94。
[19:00:13.084] 【乐感崎】躲避了【乔炼】的技能：桦讲机心诀。
[19:00:13.084] 【丁暗堤】被【乔炼】的桦讲机心诀所伤，生命值变成了 94。
[19:00:13.084] 【贝下冷】躲避了【乔炼】的技能：桦讲机心诀。
[19:00:13.180] 【柴祖前】释放了群攻技能 [高近琴棍]。
[19:00:13.187] 【裴笺翘】被【柴祖前】的高近琴棍所伤，生命值变成了 89。
[19:00:13.187] 【裴奈房】躲避了【柴祖前】的技能：高近琴棍。
[19:00:13.187] 【乐感崎】被【柴祖前】的高近琴棍所伤，生命值变成了 84。
[19:00:13.187] 【丁暗堤】被【柴祖前】的高近琴棍所伤，生命值变成了 89。
[19:00:13.187] 【贝下冷】被【柴祖前】的高近琴棍所伤，生命值变成了 95。
[19:00:13.232] 【裴笺翘】对【贾撮】释放了技能 [奈拐拳法]。
[19:00:13.235] 【贾撮】被【裴笺翘】的奈拐拳法所伤，生命值变成了 78。
[19:00:13.640] 【我】对【贝下冷】释放了技能 [犬庭掌]。
[19:00:13.640] 【贝下冷】躲避了【我】的技能：犬庭掌。
[19:00:13.772] 【乔炼】对【丁暗堤】释放了技能 [界僖掌]。
[19:00:13.772] 【丁暗堤】被【乔炼】的界僖掌所伤，生命值变成了 77。
[19:00:13.881] 【我】对【贝下冷】释放了技能 [挂小剑谱]。
[19:00:13.882] 【贝下冷】被【我】的挂小剑谱所伤，生命值变成了 85。
[19:00:14.140] 【水焘召】对【裴笺翘】释放了技能 [律僻鼎焱宝典]。
[19:00:14.143] 【裴笺翘】被【水焘召】的律僻鼎焱宝典所伤，生命值变成了 74。
[19:00:14.166] 【丁暗堤】对【柴祖前】释放了技能 [丰元歧先拳谱]。
[19:00:14.168] 【柴祖前】被【丁暗堤】的丰元歧先拳谱所伤，生命值变成了 79。
[19:00:14.434] 【贾撮】对【裴笺翘】释放了技能 [爽兽秽刀]。
[19:00:14.435] 【裴笺翘】被【贾撮】的爽兽秽刀所伤，生命值变成了 61。
[19:00:14.678] 【贾撮】对【乐感崎】释放了技能 [爽兽秽刀]。
[19:00:14.679] 【乐感崎】被【贾撮】的爽兽秽刀所伤，生命值变成了 71。
[19:00:14.815] 【水焘召】对【贝下冷】释放了技能 [律僻鼎焱宝典]。
[19:00:14.816] 【贝下冷】被【水焘召】的律僻鼎焱宝典所伤，生命值变成了 70。
[19:00:14.827] 【乔炼】对【丁暗堤】释放了技能 [陂徒聆刺]。
[19:00:14.831] 【丁暗堤】被【乔炼】的陂徒聆刺所伤，生命值变成了 66。
[19:00:15.158] 【乔炼】对【乐感崎】释放了技能 [婴杨工掌]。
[19:00:15.159] 【乐感崎】被【乔炼】的婴杨工掌所伤，生命值变成了 60。
[19:00:15.496] 【裴笺翘】对【柴祖前】释放了技能 [奈拐拳法]。
[19:00:15.500] 【柴祖前】被【裴笺翘】的奈拐拳法所伤，生命值变成了 64。
[19:00:15.570] 【裴奈房】对【我】释放了技能 [逸询掌法]。
[19:00:15.579] 【我】被【裴奈房】的逸询掌法所伤，生命值变成了 85。
[19:00:15.957] 【裴笺翘】对【贾撮】释放了技能 [旌守处甥掌法]。
[19:00:15.958] 【贾撮】被【裴笺翘】的旌守处甥掌法所伤，生命值变成了 63。
[19:00:16.033] 【水焘召】对【裴笺翘】释放了技能 [律僻鼎焱宝典]。
[19:00:16.033] 【裴笺翘】被【水焘召】的律僻鼎焱宝典所伤，生命值变成了 46。
[19:00:16.064] 【柴祖前】对【裴笺翘】释放了技能 [锦剑法]。
[19:00:16.066] 【裴笺翘】被【柴祖前】的锦剑法所伤，生命值变成了 36。
[19:00:16.304] 【裴笺翘】对【贾撮】释放了技能 [衣琴掌法]。
[19:00:16.308] 【贾撮】被【裴笺翘】的衣琴掌法所伤，生命值变成了 48。
[19:00:16.333] 【乔炼】对【裴笺翘】释放了技能 [陂徒聆刺]。
[19:00:16.336] 【裴笺翘】被【乔炼】的陂徒聆刺所伤，生命值变成了 25。
[19:00:16.530] 【柴祖前】对【裴奈房】释放了技能 [添胃恩矶拳法]。
[19:00:16.533] 【裴奈房】被【柴祖前】的添胃恩矶拳法所伤，生命值变成了 80。
[19:00:16.564] 【丁暗堤】对【乔炼】释放了技能 [丰元歧先拳谱]。
[19:00:16.565] 【乔炼】躲避了【丁暗堤】的技能：丰元歧先拳谱。
[19:00:17.153] 【裴奈房】对【水焘召】释放了技能 [逸询掌法]。
[19:00:17.153] 【水焘召】被【裴奈房】的逸询掌法所伤，生命值变成了 78。
[19:00:17.258] 【丁暗堤】对【我】释放了技能 [安矮培昀枪诀]。
[19:00:17.259] 【我】躲避了【丁暗堤】的技能：安矮培昀枪诀。
[19:00:17.413] 【我】对【裴笺翘】释放了技能 [犬庭掌]。
[19:00:17.413] 【裴笺翘】被【我】的犬庭掌所伤，生命值变成了 11。
[19:00:17.615] 【柴祖前】对【贝下冷】释放了技能 [铺冰拳法]。
[19:00:17.637] 【贝下冷】被【柴祖前】的铺冰拳法所伤，生命值变成了 59。
[19:00:17.966] 【乔炼】对【裴笺翘】释放了技能 [黑钩]。
[19:00:17.966] 【裴笺翘】躲避了【乔炼】的技能：黑钩。
[19:00:18.051] 【贝下冷】对【贾撮】释放了技能 [顷侍多港拳法]。
[19:00:18.051] 【贾撮】躲避了【贝下冷】的技能：顷侍多港拳法。
[19:00:18.219] 【丁暗堤】对【乔炼】释放了技能 [丰元歧先拳谱]。
[19:00:18.219] 【乔炼】躲避了【丁暗堤】的技能：丰元歧先拳谱。
[19:00:18.267] 【乐感崎】对【贾撮】释放了技能 [论邑棍]。
[19:00:18.267] 【贾撮】被【乐感崎】的论邑棍所伤，生命值变成了 36。
[19:00:18.312] 【裴笺翘】对【我】释放了技能 [宗伸取棍法]。
[19:00:18.313] 【我】被【裴笺翘】的宗伸取棍法所伤，生命值变成了 73。
[19:00:18.315] 【裴奈房】对【贾撮】释放了技能 [弥樗荃攻]。
[19:00:18.320] 【贾撮】被【裴奈房】的弥樗荃攻所伤，生命值变成了 23。
[19:00:18.334] 【裴笺翘】对【水焘召】释放了技能 [宗伸取棍法]。
[19:00:18.339] 【水焘召】被【裴笺翘】的宗伸取棍法所伤，生命值变成了 66。
[19:00:18.408] 【贾撮】对【裴笺翘】释放了技能 [际初出笠棍诀]。
[19:00:18.409] 【裴笺翘】被【贾撮】的际初出笠棍诀所伤，生命值变成了 0。 [死亡]
[19:00:18.431] 【乐感崎】对【柴祖前】释放了技能 [蔓娣晟大法]。
[19:00:18.431] 【柴祖前】被【乐感崎】的蔓娣晟大法所伤，生命值变成了 49。
[19:00:18.509] 【贝下冷】对【贾撮】释放了技能 [娥础誉千枪法]。
[19:00:18.510] 【贾撮】被【贝下冷】的娥础誉千枪法所伤，生命值变成了 13。
[19:00:18.613] 【水焘召】对【乐感崎】释放了技能 [律僻鼎焱宝典]。
[19:00:18.618] 【乐感崎】被【水焘召】的律僻鼎焱宝典所伤，生命值变成了 45。
[19:00:18.900] 【贝下冷】释放了群攻技能 [麒渡没与拳]。
[19:00:18.916] 【乔炼】被【贝下冷】的麒渡没与拳所伤，生命值变成了 90。
[19:00:18.916] 【柴祖前】被【贝下冷】的麒渡没与拳所伤，生命值变成了 39。
[19:00:18.916] 【贾撮】躲避了【贝下冷】的技能：麒渡没与拳。
[19:00:18.916] 【我】躲避了【贝下冷】的技能：麒渡没与拳。
[19:00:18.916] 【水焘召】被【贝下冷】的麒渡没与拳所伤，生命值变成了 56。
[19:00:18.967] 【柴祖前】对【贝下冷】释放了技能 [细亘刀谱]。
[19:00:18.970] 【贝下冷】被【柴祖前】的细亘刀谱所伤，生命值变成了 48。
[19:00:19.048] 【丁暗堤】释放了群攻技能 [犒刺]。
[19:00:19.066] 【乔炼】被【丁暗堤】的犒刺所伤，生命值变成了 83。
[19:00:19.067] 【柴祖前】被【丁暗堤】的犒刺所伤，生命值变成了 32。
[19:00:19.067] 【贾撮】被【丁暗堤】的犒刺所伤，生命值变成了 6。
[19:00:19.067] 【我】被【丁暗堤】的犒刺所伤，生命值变成了 66。
[19:00:19.067] 【水焘召】被【丁暗堤】的犒刺所伤，生命值变成了 49。
[19:00:19.075] 【乐感崎】对【乔炼】释放了技能 [蔓娣晟大法]。
[19:00:19.079] 【乔炼】被【乐感崎】的蔓娣晟大法所伤，生命值变成了 68。
[19:00:19.395] 【乐感崎】对【贾撮】释放了技能 [铁源刀]。
[19:00:19.395] 【贾撮】被【乐感崎】的铁源刀所伤，生命值变成了 0。 [死亡]
[19:00:20.396] 【我】对【丁暗堤】释放了技能 [挂小剑谱]。
[19:00:20.398] 【丁暗堤】被【我】的挂小剑谱所伤，生命值变成了 56。
[19:00:20.597] 【裴奈房】对【我】释放了技能 [迭刺]。
[19:00:20.597] 【我】被【裴奈房】的迭刺所伤，生命值变成了 52。
[19:00:21.362] 【我】对【裴奈房】释放了技能 [犬庭掌]。
[19:00:21.366] 【裴奈房】躲避了【我】的技能：犬庭掌。
[19:00:21.871] 【裴奈房】对【我】释放了技能 [逸询掌法]。
[19:00:21.872] 【我】被【裴奈房】的逸询掌法所伤，生命值变成了 37。
[19:00:22.501] 【贝下冷】对【柴祖前】释放了技能 [代掌]。
[19:00:22.502] 【柴祖前】被【贝下冷】的代掌所伤，生命值变成了 22。
[19:00:23.057] 【贝下冷】对【柴祖前】释放了技能 [娥础誉千枪法]。
[19:00:23.059] 【柴祖前】被【贝下冷】的娥础誉千枪法所伤，生命值变成了 12。
[19:00:23.101] 【贝下冷】对【柴祖前】释放了技能 [娥础誉千枪法]。
[19:00:23.107] 【柴祖前】被【贝下冷】的娥础誉千枪法所伤，生命值变成了 2。
[19:00:23.194] 【我】对【贝下冷】释放了技能 [译蜂涤错拳]。
[19:00:23.194] 【贝下冷】躲避了【我】的技能：译蜂涤错拳。
[19:00:23.415] 【丁暗堤】对【水焘召】释放了技能 [叮犁伦棍]。
[19:00:23.417] 【水焘召】被【丁暗堤】的叮犁伦棍所伤，生命值变成了 34。
[19:00:23.821] 【裴奈房】对【柴祖前】释放了技能 [逸询掌法]。
[19:00:23.823] 【柴祖前】被【裴奈房】的逸询掌法所伤，生命值变成了 0。 [死亡]
[19:00:24.217] 【水焘召】释放了群攻技能 [琇咨刺]。
[19:00:24.239] 【水焘召】对【裴笺翘】施展了 [琇咨刺]，但是对方早就死了。
[19:00:24.239] 【裴奈房】躲避了【水焘召】的技能：琇咨刺。
[19:00:24.239] 【乐感崎】被【水焘召】的琇咨刺所伤，生命值变成了 35。
[19:00:24.239] 【丁暗堤】被【水焘召】的琇咨刺所伤，生命值变成了 46。
[19:00:24.239] 【贝下冷】被【水焘召】的琇咨刺所伤，生命值变成了 38。
[19:00:24.295] 【贝下冷】对【乔炼】释放了技能 [代掌]。
[19:00:24.296] 【乔炼】躲避了【贝下冷】的技能：代掌。
[19:00:24.333] 【贝下冷】对【我】释放了技能 [娥础誉千枪法]。
[19:00:24.334] 【我】被【贝下冷】的娥础誉千枪法所伤，生命值变成了 27。
[19:00:24.403] 【贝下冷】对【我】释放了技能 [顷侍多港拳法]。
[19:00:24.404] 【我】被【贝下冷】的顷侍多港拳法所伤，生命值变成了 14。
[19:00:24.560] 【贝下冷】对【水焘召】释放了技能 [代掌]。
[19:00:24.561] 【水焘召】被【贝下冷】的代掌所伤，生命值变成了 24。
[19:00:25.062] 【贝下冷】对【乔炼】释放了技能 [朝刀诀]。
[19:00:25.064] 【乔炼】被【贝下冷】的朝刀诀所伤，生命值变成了 56。
[19:00:25.173] 【裴奈房】释放了群攻技能 [卵句林攻]。
[19:00:25.211] 【乔炼】被【裴奈房】的卵句林攻所伤，生命值变成了 49。
[19:00:25.211] 【裴奈房】对【柴祖前】施展了 [卵句林攻]，但是对方早就死了。
[19:00:25.211] 【裴奈房】对【贾撮】施展了 [卵句林攻]，但是对方早就死了。
[19:00:25.211] 【我】躲避了【裴奈房】的技能：卵句林攻。
[19:00:25.211] 【水焘召】被【裴奈房】的卵句林攻所伤，生命值变成了 17。
[19:00:25.649] 【我】对【裴奈房】释放了技能 [犬庭掌]。
[19:00:25.650] 【裴奈房】被【我】的犬庭掌所伤，生命值变成了 66。
[19:00:25.705] 【我】对【乐感崎】释放了技能 [译蜂涤错拳]。
[19:00:25.706] 【乐感崎】被【我】的译蜂涤错拳所伤，生命值变成了 24。
[19:00:25.886] 【丁暗堤】对【水焘召】释放了技能 [叮犁伦棍]。
[19:00:25.893] 【水焘召】被【丁暗堤】的叮犁伦棍所伤，生命值变成了 2。
[19:00:26.961] 【乐感崎】对【我】释放了技能 [论邑棍]。
[19:00:26.963] 【我】被【乐感崎】的论邑棍所伤，生命值变成了 2。
[19:00:27.580] 【水焘召】对【裴奈房】释放了技能 [式庚商娌刀诀]。
[19:00:27.580] 【裴奈房】被【水焘召】的式庚商娌刀诀所伤，生命值变成了 53。
[19:00:27.950] 【乔炼】释放了群攻技能 [桦讲机心诀]。
[19:00:27.953] 【乔炼】对【裴笺翘】施展了 [桦讲机心诀]，但是对方早就死了。
[19:00:27.953] 【裴奈房】被【乔炼】的桦讲机心诀所伤，生命值变成了 47。
[19:00:27.953] 【乐感崎】被【乔炼】的桦讲机心诀所伤，生命值变成了 18。
[19:00:27.953] 【丁暗堤】被【乔炼】的桦讲机心诀所伤，生命值变成了 40。
[19:00:27.953] 【贝下冷】被【乔炼】的桦讲机心诀所伤，生命值变成了 32。
[19:00:28.016] 【丁暗堤】对【水焘召】释放了技能 [丰元歧先拳谱]。
[19:00:28.017] 【水焘召】被【丁暗堤】的丰元歧先拳谱所伤，生命值变成了 0。 [死亡]
[19:00:29.230] 【裴奈房】对【乔炼】释放了技能 [弥樗荃攻]。
[19:00:29.230] 【乔炼】被【裴奈房】的弥樗荃攻所伤，生命值变成了 36。
[19:00:29.401] 【丁暗堤】对【我】释放了技能 [安矮培昀枪诀]。
[19:00:29.405] 【我】躲避了【丁暗堤】的技能：安矮培昀枪诀。
[19:00:29.555] 【我】对【乐感崎】释放了技能 [译蜂涤错拳]。
[19:00:29.558] 【乐感崎】被【我】的译蜂涤错拳所伤，生命值变成了 7。
[19:00:29.676] 【裴奈房】对【乔炼】释放了技能 [弥樗荃攻]。
[19:00:29.680] 【乔炼】被【裴奈房】的弥樗荃攻所伤，生命值变成了 23。
[19:00:30.220] 【丁暗堤】对【乔炼】释放了技能 [叮犁伦棍]。
[19:00:30.239] 【乔炼】被【丁暗堤】的叮犁伦棍所伤，生命值变成了 8。
[19:00:30.867] 【乐感崎】对【乔炼】释放了技能 [铁源刀]。
[19:00:30.867] 【乔炼】被【乐感崎】的铁源刀所伤，生命值变成了 0。 [死亡]
[19:00:31.586] 【我】对【贝下冷】释放了技能 [挂小剑谱]。
[19:00:31.586] 【贝下冷】被【我】的挂小剑谱所伤，生命值变成了 22。
[19:00:34.218] 【丁暗堤】对【我】释放了技能 [眠是攻]。
[19:00:34.256] 【我】被【丁暗堤】的眠是攻所伤，生命值变成了 0。 [死亡]
[19:00:34.258] ---===【Defeat】===---
```

## Analyze

首先是起名相关的两个包的文章：

+ http://xcoder.in/2014/09/01/how-i-made-chinese-random-x/
+ http://html-js.com/article/Nodejs-rolled-me-is-how-to-realize-the-Chinese-of-simple-random-name-generator-Node-version
+ http://blog.segmentfault.com/xadillax/1190000000655872
+ http://v2ex.com/t/131183

然后关于这个 Repo 稍后也会放出解析的。

